# =============================================================================
# NestJS 项目环境配置文件模板
# =============================================================================
# 此文件作为环境配置的模板，包含所有必需的环境变量
# 使用方法：复制此文件为 .env 并根据实际环境修改配置值
# 注意：此文件不应包含真实的敏感信息，仅作为配置参考
# =============================================================================

# -----------------------------------------------------------------------------
# 数据库配置 (PostgreSQL)
# -----------------------------------------------------------------------------
DB_HOST=localhost                    # 数据库服务器地址
DB_PORT=5432                         # 数据库端口 (PostgreSQL 默认: 5432)
DB_USERNAME=postgres                 # 数据库用户名 (需要有创建表和读写权限)
DB_PASSWORD=your_password            # 数据库密码 (生产环境请使用强密码)
DB_DATABASE=nest_eidos               # 应用数据库名称

# -----------------------------------------------------------------------------
# Redis 缓存配置
# -----------------------------------------------------------------------------
REDIS_HOST=localhost                 # Redis 服务器地址
REDIS_PORT=6379                      # Redis 服务器端口 (默认: 6379)
REDIS_PASSWORD=your_redis_password_here  # Redis 连接密码 (可选)
REDIS_DB=0                           # Redis 数据库编号 (0-15)
REDIS_KEY_PREFIX=nest_eidos:         # Redis 键名前缀，用于区分不同应用

# -----------------------------------------------------------------------------
# 认证系统配置
# -----------------------------------------------------------------------------
# Token 配置
AUTH_TOKEN_EXPIRES_IN=3600           # Token 过期时间 (秒，默认1小时)
AUTH_TOKEN_BYTES_LENGTH=32           # Token 生成字节数 (默认32字节，生成64位hex字符串)
AUTH_REDIS_KEY_PREFIX=auth:token:    # Redis 中存储 token 的键名前缀

# 安全配置
AUTH_BCRYPT_ROUNDS=10                # bcrypt 密码加密轮数 (开发环境: 10-12，生产环境: 12-14)
AUTH_MAX_LOGIN_ATTEMPTS=5            # 最大登录失败尝试次数 (防止暴力破解)
AUTH_LOCKOUT_TIME=900                # 账户锁定时间 (秒，默认15分钟)



# -----------------------------------------------------------------------------
# 安全ID加密配置
# -----------------------------------------------------------------------------
# 安全ID加密密钥 (32字节 hex格式，用于Feistel网络PRP)
# 警告：生产环境必须使用强密钥，可使用以下命令生成：
# openssl rand -hex 32
SECURE_ID_SECRET_KEY=hex:1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef

# -----------------------------------------------------------------------------
# 应用基础配置
# -----------------------------------------------------------------------------
PORT=3000                            # 应用服务监听端口
NODE_ENV=development                 # 运行环境 (development | production | test)

# -----------------------------------------------------------------------------
# 文件上传配置
# -----------------------------------------------------------------------------
# 最大文件上传大小（字节）
# 默认值：104857600 (100MB)
# 可以根据需要调整大小，注意服务器内存和存储容量限制
UPLOAD_MAX_FILE_SIZE=104857600

# 其他可能的文件上传配置（为未来扩展预留）
# UPLOAD_ALLOWED_MIME_TYPES=image/jpeg,image/png,image/gif,image/webp
# UPLOAD_MAX_FILES_PER_REQUEST=10
# UPLOAD_TEMP_DIR=/tmp/uploads

# -----------------------------------------------------------------------------
# 配置说明和最佳实践
# -----------------------------------------------------------------------------
# 1. 安全性：
#    - 生产环境中所有密码都必须使用强密码
#    - 数据库和 Redis 建议使用专用用户，避免使用超级用户
#    - SECURE_ID_SECRET_KEY 必须使用强密钥，不要使用示例中的密钥
#
# 2. 环境分离：
#    - 不同环境使用不同的数据库和 Redis 实例
#    - 使用不同的键前缀避免数据冲突
#    - 生产环境的 token 过期时间应短于开发环境
#
# 3. 部署注意事项：
#    - .env 文件不应提交到版本控制系统
#    - 生产环境使用环境变量或配置管理工具
#    - Docker 部署时使用 secrets 或环境变量注入
# =============================================================================